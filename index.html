<!DOCTYPE html>
<html lang="pt-BR">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Editor Markdown</title>
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
     <style>
          body {
               font-family: Arial, sans-serif;
               margin: 0;
               padding: 20px;
               background: #f9f9f9;
               transition: background 0.3s, color 0.3s;
          }

          .container {
               max-width: 800px;
               margin: auto;
               background: #fff;
               padding: 20px;
               border-radius: 8px;
               box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
               transition: background 0.3s, color 0.3s;
          }

          textarea {
               width: 100%;
               height: 200px;
               padding: 10px;
               font-family: monospace;
               border-radius: 6px;
               border: 1px solid #ccc;
               resize: vertical;
               transition: background 0.3s, color 0.3s;
          }

          button {
               margin-top: 15px;
               margin-right: 10px;
               padding: 10px 15px;
               background: #007bff;
               color: white;
               border: none;
               border-radius: 6px;
               cursor: pointer;
          }

          button:hover {
               background: #0056b3;
          }

          #preview {
               margin-top: 20px;
               padding: 15px;
               border: 1px solid #ddd;
               border-radius: 6px;
               background: #fafafa;
               transition: background 0.3s, color 0.3s;
          }

          /* Tema escuro */
          body.dark {
               background: #1e1e1e;
               color: #f1f1f1;
          }

          .container.dark {
               background: #2c2c2c;
          }

          textarea.dark {
               background: #333;
               color: #f1f1f1;
               border: 1px solid #555;
          }

          #preview.dark {
               background: #2b2b2b;
               color: #f1f1f1;
               border: 1px solid #444;
          }
     </style>
</head>

<body>
     <div class="container" id="container">
          <h2>Editor de Markdown</h2>
          <textarea id="editor" placeholder="Digite seu texto em Markdown..."></textarea>
          <br>
          <button onclick="exportMD()">Exportar como .md</button>
          <button onclick="previewMD()">Pr√©-visualizar</button>
          <button onclick="toggleTheme()">üåô Alternar Tema</button>
          <input type="file" id="fileInput" accept=".md" onchange="loadFile(event)" />

          <div id="preview"></div>
     </div>

     <script>
          function exportMD() {
               const text = document.getElementById("editor").value;
               const blob = new Blob([text], { type: "text/markdown" });
               const url = URL.createObjectURL(blob);
               const a = document.createElement("a");
               a.href = url;
               a.download = "meu_texto.md";
               a.click();
               URL.revokeObjectURL(url);
          }

          function previewMD() {
               const text = document.getElementById("editor").value;
               document.getElementById("preview").innerHTML = marked.parse(text);
          }

          function toggleTheme() {
               document.body.classList.toggle("dark");
               document.getElementById("container").classList.toggle("dark");
               document.getElementById("editor").classList.toggle("dark");
               document.getElementById("preview").classList.toggle("dark");
          }

          function loadFile(event) {
               const file = event.target.files[0];
               if (file && file.name.endsWith(".md")) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                         document.getElementById("editor").value = e.target.result;
                         previewMD(); // j√° renderiza o conte√∫do
                    };
                    reader.readAsText(file);
               } else {
                    alert("Por favor, selecione um arquivo .md v√°lido!");
               }
          }
     </script>
</body>

</html>